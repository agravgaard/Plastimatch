
# projection properties test
INCLUDE_DIRECTORIES(
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_BASICTESTING_SUBDIR}
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}
)
IF(VTK_FOUND)
ADD_EXECUTABLE(TestProjectionProperties
   
  TestProjectionProperties.cxx
  
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraProjectionProperties.h
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraProjectionProperties.txx
)
TARGET_LINK_LIBRARIES(TestProjectionProperties
  ORAIFNReg2D3DDRREngine
)
ADD_TEST(TestProjectionProperties ${EXECUTABLE_OUTPUT_PATH}/TestProjectionProperties -v)

# DRR filter test
INCLUDE_DIRECTORIES(
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_BASICTESTING_SUBDIR}
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_TRANSFORM_SUBDIR}
)
ADD_EXECUTABLE(TestDRRFilter
  
  TestDRRFilter.cxx
  
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraITKVTKDRRFilter.h
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraITKVTKDRRFilter.txx
  
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_TRANSFORM_SUBDIR}/oraITKVTKLinearTransformConnector.h
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_TRANSFORM_SUBDIR}/oraITKVTKLinearTransformConnector.cxx
)
TARGET_LINK_LIBRARIES(TestDRRFilter
  ORAIFNReg2D3DDRREngine
  ORAIFNReg2D3DTransform
)
ADD_TEST(TestDRRFilter ${EXECUTABLE_OUTPUT_PATH}/TestDRRFilter -v)


# projection geometry verification
INCLUDE_DIRECTORIES(
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_BASICTESTING_SUBDIR}
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_TRANSFORM_SUBDIR} 
)
ADD_EXECUTABLE(TestGLSLProjectionGeometry
  
  TestGLSLProjectionGeometry.cxx
  
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraITKVTKDRRFilter.h
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraITKVTKDRRFilter.txx
  
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_TRANSFORM_SUBDIR}/oraITKVTKLinearTransformConnector.h
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_TRANSFORM_SUBDIR}/oraITKVTKLinearTransformConnector.cxx
)
TARGET_LINK_LIBRARIES(TestGLSLProjectionGeometry
  ORAIFNReg2D3DDRREngine
  ORAIFNReg2D3DTransform
)
ADD_TEST(TestGLSLProjectionGeometry ${EXECUTABLE_OUTPUT_PATH}/TestGLSLProjectionGeometry -v -xo)


# portal imaging device projection properties verification
INCLUDE_DIRECTORIES(
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_BASICTESTING_SUBDIR}
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_MATHS_SUBDIR}
)
ADD_EXECUTABLE(TestPortalImagingDeviceProjectionProperties
  
  TestPortalImagingDeviceProjectionProperties.cxx
  
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraPortalImagingDeviceProjectionProperties.h
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraPortalImagingDeviceProjectionProperties.txx
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraTranslationScaleFlexMapCorrection.h
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraTranslationScaleFlexMapCorrection.txx
)
TARGET_LINK_LIBRARIES(TestPortalImagingDeviceProjectionProperties
  ORAIFNReg2D3DDRREngine
  ORAIFNReg2D3DMathMethods
)
ADD_TEST(TestPortalImagingDeviceProjectionProperties ${EXECUTABLE_OUTPUT_PATH}/TestPortalImagingDeviceProjectionProperties -v)
ENDIF(VTK_FOUND)

# DRR API: projection geometry verification
INCLUDE_DIRECTORIES(
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_BASICTESTING_SUBDIR}
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}
)
ADD_EXECUTABLE(TestProjectionGeometry
  
  TestProjectionGeometry.cxx
  
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraProjectionGeometry.h
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraProjectionGeometry.cxx
)
TARGET_LINK_LIBRARIES(TestProjectionGeometry
  ORAIFNReg2D3DDRREngine
)
ADD_TEST(TestProjectionGeometry ${EXECUTABLE_OUTPUT_PATH}/TestProjectionGeometry -v)

# DRR API: image-based projection geometry verification
INCLUDE_DIRECTORIES(
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_BASICTESTING_SUBDIR}
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}
)
ADD_EXECUTABLE(TestImageBasedProjectionGeometry
  
  TestImageBasedProjectionGeometry.cxx
  
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraProjectionGeometry.h
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraProjectionGeometry.cxx
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraImageBasedProjectionGeometry.h
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraImageBasedProjectionGeometry.txx
)
TARGET_LINK_LIBRARIES(TestImageBasedProjectionGeometry
  ORAIFNReg2D3DDRREngine
)
ADD_TEST(TestImageBasedProjectionGeometry ${EXECUTABLE_OUTPUT_PATH}/TestImageBasedProjectionGeometry -v)

# DRR API: intensity transfer function verification
INCLUDE_DIRECTORIES(
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_BASICTESTING_SUBDIR}
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}
)
ADD_EXECUTABLE(TestIntensityTransferFunction
  
  TestIntensityTransferFunction.cxx
  
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraIntensityTransferFunction.h
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraIntensityTransferFunction.cxx
)
TARGET_LINK_LIBRARIES(TestIntensityTransferFunction
  ORAIFNReg2D3DDRREngine
)
ADD_TEST(TestIntensityTransferFunction ${EXECUTABLE_OUTPUT_PATH}/TestIntensityTransferFunction -v)

# DRR API: Siddon CPU DRR Filter verification
INCLUDE_DIRECTORIES(
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_BASICTESTING_SUBDIR}
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}
)
ADD_EXECUTABLE(TestCPUSiddonDRRFilter
  
  TestCPUSiddonDRRFilter.cxx
  
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraCPUSiddonDRRFilter.h
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraCPUSiddonDRRFilter.txx
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraProjectionGeometry.h
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraProjectionGeometry.cxx
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraIntensityTransferFunction.h
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraIntensityTransferFunction.cxx  
)
TARGET_LINK_LIBRARIES(TestCPUSiddonDRRFilter
  ORAIFNReg2D3DDRREngine
)
ADD_TEST(TestCPUSiddonDRRFilter ${EXECUTABLE_OUTPUT_PATH}/TestCPUSiddonDRRFilter -v)

# DRR API: Siddon CPU DRR Filter's projection geometry (accuracy, correctness) verification
INCLUDE_DIRECTORIES(
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_BASICTESTING_SUBDIR}
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_TRANSFORM_SUBDIR} 
)
ADD_EXECUTABLE(TestCPUSiddonDRRFilterProjectionGeometry
  
  TestCPUSiddonDRRFilterProjectionGeometry.cxx
  CommonDRREngineToolFunctions.hxx
  
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraCPUSiddonDRRFilter.h
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraCPUSiddonDRRFilter.txx
  
  #${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_TRANSFORM_SUBDIR}/oraITKVTKLinearTransformConnector.h
  #${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_TRANSFORM_SUBDIR}/oraITKVTKLinearTransformConnector.cxx
)
TARGET_LINK_LIBRARIES(TestCPUSiddonDRRFilterProjectionGeometry
  ORAIFNReg2D3DDRREngine
  #ORAIFNReg2D3DTransform
)
ADD_TEST(TestCPUSiddonDRRFilterProjectionGeometry ${EXECUTABLE_OUTPUT_PATH}/TestCPUSiddonDRRFilterProjectionGeometry -v -xo)

# DRR API: GLSL DRR Filter verification
INCLUDE_DIRECTORIES(
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_BASICTESTING_SUBDIR}
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}
)
ADD_EXECUTABLE(TestGLSLRayCastingDRRFilter
  
  TestGLSLRayCastingDRRFilter.cxx
  
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraGLSLRayCastingDRRFilter.h
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraGLSLRayCastingDRRFilter.txx
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraProjectionGeometry.h
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraProjectionGeometry.cxx
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraIntensityTransferFunction.h
  ${ORAIFUTILS_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraIntensityTransferFunction.cxx  
)
TARGET_LINK_LIBRARIES(TestGLSLRayCastingDRRFilter
  ORAIFNReg2D3DDRREngine
)
ADD_TEST(TestGLSLRayCastingDRRFilter ${EXECUTABLE_OUTPUT_PATH}/TestGLSLRayCastingDRRFilter -v)
