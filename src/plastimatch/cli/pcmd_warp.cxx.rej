--- Plastimatch/src/plastimatch/cli/pcmd_warp.cxx	2016-08-10 00:01:45.579993857 +0200
+++ GitLabPlastimatch/src/plastimatch/cli/pcmd_warp.cxx	2016-08-10 00:54:10.276626311 +0200
@@ -157,8 +157,20 @@
         "patient name metadata: string", 1);
     parser->add_long_option ("", "patient-pos",
         "patient position metadata: one of {hfs,hfp,ffs,ffp}", 1, "hfs");
+    parser->add_long_option ("", "study-description",
+        "study description: string", 1);
     parser->add_long_option ("", "series-description",
-        "series description metadata: string", 1);
+        "series description for image metadata: string", 1);
+    parser->add_long_option ("", "dose-series-description",
+        "series description for dose metadata: string", 1);
+    parser->add_long_option ("", "rtss-series-description",
+        "series description for structure metadata: string", 1);
+    parser->add_long_option ("", "series-number",
+        "series number for image metadata: integer", 1);
+    parser->add_long_option ("", "dose-series-number",
+        "series number for dose metadata: integer", 1);
+    parser->add_long_option ("", "rtss-series-number",
+        "series number for structure metadata: integer", 1);
 
     /* Parse options */
     parser->parse (argc,argv);
@@ -313,35 +325,65 @@
 
     /* Metadata options */
     for (unsigned int i = 0; i < parser->option("metadata").count(); i++) {
-        parms->m_metadata.push_back (
+        parms->m_study_metadata.push_back (
             parser->option("metadata").argument(0,i));
     }
     if (parser->option ("modality")) {
         std::string arg = parser->get_string ("modality");
         std::string metadata_string = "0008,0060=" + arg;
-        parms->m_metadata.push_back (metadata_string);
+        parms->m_image_metadata.push_back (metadata_string);
     }
     if (parser->option ("patient-name")) {
         std::string arg = parser->get_string ("patient-name");
         std::string metadata_string = "0010,0010=" + arg;
-        parms->m_metadata.push_back (metadata_string);
+        parms->m_study_metadata.push_back (metadata_string);
     }
     if (parser->option ("patient-id")) {
         std::string arg = parser->get_string ("patient-id");
         std::string metadata_string = "0010,0020=" + arg;
-        parms->m_metadata.push_back (metadata_string);
+        parms->m_study_metadata.push_back (metadata_string);
     }
     if (parser->option ("patient-pos")) {
         std::string arg = parser->get_string ("patient-pos");
         std::transform (arg.begin(), arg.end(), arg.begin(), 
             (int(*)(int)) toupper);
         std::string metadata_string = "0018,5100=" + arg;
-        parms->m_metadata.push_back (metadata_string);
+        parms->m_study_metadata.push_back (metadata_string);
+    }
+    if (parser->option ("study-description")) {
+        std::string arg = parser->get_string ("study-description");
+        std::string metadata_string = "0008,1030=" + arg;
+        parms->m_study_metadata.push_back (metadata_string);
     }
     if (parser->option ("series-description")) {
         std::string arg = parser->get_string ("series-description");
         std::string metadata_string = "0008,103e=" + arg;
-        parms->m_metadata.push_back (metadata_string);
+        parms->m_image_metadata.push_back (metadata_string);
+    }
+    if (parser->option ("dose-series-description")) {
+        std::string arg = parser->get_string ("dose-series-description");
+        std::string metadata_string = "0008,103e=" + arg;
+        parms->m_dose_metadata.push_back (metadata_string);
+    }
+    if (parser->option ("rtss-series-description")) {
+        std::string arg = parser->get_string ("rtss-series-description");
+        std::string metadata_string = "0008,103e=" + arg;
+        parms->m_rtss_metadata.push_back (metadata_string);
+    }
+    if (parser->option ("series-number")) {
+        std::string arg = parser->get_string ("series-number");
+        std::string metadata_string = "0020,0011=" + arg;
+        parms->m_image_metadata.push_back (metadata_string);
+    }
+    if (parser->option ("dose-series-number")) {
+        std::string arg = parser->get_string ("dose-series-number");
+        std::string metadata_string = "0020,0011=" + arg;
+        parms->m_dose_metadata.push_back (metadata_string);
+    }
+    if (parser->option ("rtss-series-number")) {
+        std::string arg = parser->get_string ("rtss-series-number");
+        std::string metadata_string = "0020,0011=" + arg;
+        parms->m_rtss_metadata.push_back (metadata_string);
     }
 }
 
